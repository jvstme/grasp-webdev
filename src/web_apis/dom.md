# Document Object Model (DOM)

Изначально веб-страница представляет из себя HTML-файл, однако работать напрямую с HTML из JavaScript достаточно сложно. Поэтому браузер представляет страницу в виде дерева объектов, называемого Document Object Model или DOM.

Дерево DOM состоит из множества узлов, при этом каждый узел может содержать в себе ещё множество дочерних узлов. В качестве узла обычно выступает HTML-элемент или текстовый узел.

Рассмотрим в качестве примера фрагмент HTML-страницы:

```html
<body>
    <p>Hello world</p>
    <p>Welcome to <strong>my</strong> page</p>
</body>
```

Соответствующий фрагмент DOM можно условно представить так:

```
body
├── (текстовый узел)
├── p
│   └── (текстовый узел) Hello world
├── (текстовый узел)
├── p
│   ├── (текстовый узел) Welcome to
│   ├── strong
│   │   └── (текстовый узел) my
│   └── (текстовый узел) page
└── (текстовый узел)
```

Начинается фрагмент с элемента `body`. Внутри него содержатся 5 узлов:

- Текстовый узел с переносом строки и отступом
- Элемент `p`, внутри которого содержится текстовый узел с текстом `Hello world`
- Снова текстовый узел с переносом строки и отступом
- Элемент `p`, внутри которого содержится ещё ряд узлов, представляющих текст `Welcome to my page`
- Ещё один текстовый узел с переносом строки

Браузер позволяет скриптам на JavaScript взаимодействовать с DOM через глобальный объект `document`, как мы увидим в следующих главах.

Следует отметить, что при загрузке страницы браузер постепенно заполняет DOM по мере получения с сервера и обработки HTML-файла. Обычно JavaScript-скрипты подключаются к странице через тег `<script>` внутри тега `<head>`, поэтому к моменту выполнения скрипта браузер ещё не успеет добавить в DOM основное содержимое страницы, находящееся ниже по HTML-файлу, в теге `<body>`. Если скрипту важно содержимое DOM, то тег `<script>` следует помечать атрибутом `defer`.

```html
<!DOCTYPE html>
<html>
    <head>
        <script src="script.js" defer></script>
    </head>
    <body>
        <!-- Полезное содержимое страницы -->
    </body>
</html>
```

Благодаря `defer` браузер начнёт выполнение скрипта только после того, как вся страница будет добавлена в DOM.
