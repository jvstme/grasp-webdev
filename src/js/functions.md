# Функции

### Основы

Функция — отдельная часть программы, выполняющая какую-то задачу. Мы уже знаем и используем встроенные функции JavaScript, такие как `alert` или `prompt`. К функциям также можно отнести методы, например метод массивов `push` или метод строк `trim`.

Помимо встроенных, JavaScript позволяет разработчикам задавать свои собственные функции. Объявление функции состоит из следующих элементов:

- ключевого слова `function`
- имени, которое описывает назначение функции и используется для того, чтобы в других местах программы вызвать эту функцию
- списка параметров, то есть аргументов, которые принимает функция, которые можно использовать в теле функции так же, как обычные переменные
- тела, то есть программного кода, который будет выполнен при вызове функции

```js
function doSomething(param1, param2, /* ... */, paramN) {
    // Тело функции
}
```

В качестве результата выполнения функция может вернуть какое-то значение в вызывающий код. Для этого используется ключевое слово `return`. Если исполнение функции доходит до `return`, то дальше функция не исполняется.

```js
function divide(dividend, divisor) {
    if (divisor === 0) {
        return null;
    }

    return dividend / divisor;
}

divide(10, 2);  // Возвращает: 5
divide(10, 4);  // Возвращает: 2.5
divide(10, 0);  // Возвращает: null
```

В функции может не быть ключевого слова `return`, либо `return` может быть использован без аргумента. Тогда функция возвращает `undefined`.

```js
function sayHi() {
    alert("Hi");
}

function doNothing() {
    return;
}

sayHi();      // Возвращает: undefined
doNothing();  // Возвращает: undefined
```

### Область видимости

Созданные внутри функции переменные находятся в собственной области видимости, после завершения функции они исчезают.

```js
function foo() {
    const bar = 1;
}

foo();
bar;  // Ошибка: переменной bar не существует
```

При этом функция может использовать переменные из внешней области видимости и устанавливать в них новые значения. Но обычно это считается плохой практикой, так как тогда осложняется понимание и использование функции, потому что для её использования появляется дополнительное условие — наличие нужных переменных. Рекомендуется писать функции так, чтобы с вызывающим кодом они взаимодействовали только через параметры и `return`.

```js
let baz = 2;

// ❌ Плохо:

function doubleBaz() {
    baz *= 2;
}

doubleBaz();
baz;  // Возвращает: 4

// ✅ Хорошо:

function double(num) {
    return num * 2;
}

baz = double(baz);
baz;  // Возвращает: 8
```

### Зачем нужны функции

Хорошо написанные функции полезны по ряду причин:

- Они позволяют переиспользовать код, то есть не писать один и тот же алгоритм в нескольких местах программы.
- Они помогают понимать большие и сложные программы, потому что делят их на маленькие части, каждая из которых решает собственную задачу.
- Они скрывают детали реализации алгоритма, то есть позволяют разработчику воспользоваться готовым алгоритмом, не вдаваясь в то, как он реализован.

## Упражнения

1. В форме регистрации на экскурсию пользователь указывает своё имя, основной номер телефона и запасной номер телефона. Оба номера должны быть российскими и должны быть указаны в международном формате, то есть номер должен состоять из кода страны `+7` и последующих десяти цифр. Пример номера: `+71234567890`.

    Напиши скрипт, который запрашивает у пользователя нужные данные, проверяет их и выводит либо сообщение `Экскурсант <ИМЯ> зарегистрирован`, либо сообщение об ошибке с пояснением, какое поле введено неверно.

1. В некой онлайн-игре игроки могут писать друг другу письма. Для этого игрок указывает адрес отправителя, адрес получателя и текст письма. Текст должен быть не длиннее \\( 2^{16} \\) символов. Адрес представляет из себя строку вида `<имя игрока>@<имя сервера>`, например `user1@server2`. Как имя игрока, так и имя сервера должно состоять из 5-15 символов, допустимы только строчные латинские буквы и цифры.

    Напиши скрипт, который запрашивает необходимые для отправки письма данные, проверяет их и выводит, можно ли такое письмо отправить.
